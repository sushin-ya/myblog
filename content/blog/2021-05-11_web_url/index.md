---
title: リソースとURL設計
date: "2021-05-11T22:36:37.121Z"
---

こんにちは。  
今回は、リソースと URL 設計についてです。  
React の復習が果てしないので、一端アプリ構築に着手することにしました。  
ひとまずは、ワイヤーフレーム作って、URL とか DB 設計して、モック作るとこまでです。  
React でコンポーネント作ったら、また React 復習して、みたいな感じに、  
Udemy の内容と並行して開発していこうと思います。

さて、今回は リソースと URL の設計です。  
おおかた画面設計が出来たので、具体的に URL を決めていきます。  
ひとまず何から手を付けたらいいのかわからないので、『Web を支える技術』を読んでいきます。  
前に読んだはずなのに何も覚えていないので、言葉の整理からはじめます。

#### リソースとは

リソースとは「Web 上に存在する、名前をもつありとあらゆる情報」だそうです。
例として、下記が挙げられています。確かに何でもありですね。

- 東京の天気予報
- 技術評論社の『Web を支える技術』のページ
- 新花巻駅の写真
- 筆者の最近のブックマーク

#### URI (URL) とは

URI とは、リソースの名前のことです。  
「Uniform Resource Identifier = リソースを統一的に識別する ID＿とのこと。  
なお、当然ですが、リソースは複数の URI を持つことが出来ます。

#### REST とは（ついでに）

REST はよく言葉として出てきますが、結局ナンナノ？というのはすっと答えられません。  
つまるところは、REST = ULCODC$SS（下記の方針の略語の塊）であるということです。  
いま当たり前にインターネットで使われている状態のこと、と思っておけばよいでしょうか。

- クライアント／サーバ：ユーザインターフェースと処理を分離する
- ステートレスサーバ：サーバ側でアプリケーションの状態を持たない
- キャッシュ：クライアントとサーバの通信回数と量を減らす
- 統一インターフェース：インターフェースを固定する
- 階層化システム：システムを階層に分離する
- コードオンデマンド：プログラムをクライアントにダウンロードして実行する

#### Cool URIs don't change

『Web を支える技術』第 5 章で、きれいで良い URI について説明されています。  
実現するための設計方針は下記のとおりです。

- URI にプログラミング言語依存の拡張子を利用しない(.pl、.rb など)
- URI に実装依存のパス名を利用しない(cgi-bin、servlet など)
- URI にプログラミング言語のメソッド名を利用しない(rails でいう show など)
- URI にセッション ID を含めない
- URI はそのリソースを表現する名詞である

基本的にはシンプルな階層構造を名詞で表現するのが良いみたいですね。
他にテクニックとして、言語を拡張子として組み込んだり、マトリクス URI を使ったりもできるらしいです。

```html:title=example
#言語を拡張子として表現
http://example.jp/2010/05/01/press.ja
http://example.jp/2010/05/01/press.en

#座標をマトリクスとして表現
http://example.jp/map/lat=35.705471;lng=139.751898
```

#### Web サービスの設計とリソース設計

##### リソース指向アーキテクチャのアプローチ

Web サービス設計の手法として、リソース指向アーキテクチャのアプローチが紹介されています。  
次のようなステップからなります。

1. Web サービスで提供するデータを特定する
1. データをリソースに分ける

各リソースに関して、下記を行います。

1. リソースに URI で名前をつける
1. クライアントに提供するリソースの表現を設計する
1. リンクとフォームを利用してリソース同士を結びつける
1. イベントの標準的なコースを検討する
1. エラーについて検討する

##### リソース指向アーキテクチャのアプローチの問題点

前提として、リソース設計には、定石がなく、何にリソースとして URI を与えるのか判断するのは難しいらしいです。本書では、下記の 3 つの成果物をもとにリソース設計を行っています。

- 関係モデルの ER 図
  - ER 図からデータ同士の関係性に着目し、中心となるテーブルからリソースを考える
  - 階層化は別途考慮が必要
  - トップページや検索のリソースについては別途考慮が必要
- オブジェクト指向モデルのクラス図
  - 主要データクラスからリソースを考える
  - 検索のリソースはメソッドに対応付けすればわかりやすい
  - 階層化やリンクについても考慮しやすい
  - トップページは別途考慮が必要
- 情報アーキテクチャ
  - どうやって情報を引き出すのか？みたいな考え方
  - （詳細は別書籍で解説されているらしい）

以上のように、明確にこうすればいいということはないですが、  
データの構造からリソースを作り、加えてトップページや検索、リンクを考慮すれば、  
全体としてはカバーできるようでした。

#### 最後に

今回は概念的な復習でした。  
実際にこの内容を参照しつつ、今作ろうとしている映画サイトの URI などを考えてみようと思います。

#### 参考

- 山本 陽平:『Web を支える技術 -HTTP、URI、HTML、そして REST (WEB+DB PRESS plus)』,技術評論社(2010).
