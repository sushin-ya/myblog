---
title: サイボウズの新人研修資料を読むその１
date: "2021-08-05T20:06:37.121Z"
---

こんにちは。  
９月入社で少し時間が空いてしまうので、勉強しとかないと思っている今日このごろです。  
その一環として、ひとまず基礎教養を固めていこうと思い、今回はサイボウズの新人研修資料を読んでいきたいと思います。  
転職活動の際、web develop ロードマップの重要単語をそこそこさらっていたおかげで、あまり知らない言葉というのはなかったのですが、面接とは違い、業務となるとより広範の知識が必要になると思いますので、今後も書籍やこういう資料で勉強していきたいですね。ありがたやありがたや。

以降では気になったトピックを挙げていきます。

#### Web アプリケーション基礎

##### Socket とプロセス／スレッド

サーバとクライアントで通信するための API。TCP や UDP で実現される技術らしい。ちなみに、UNIX ドメインソケットはファイルシステムを使用して実現されるやつらしい。

サーバ側がリクエストを受付 → リクエスト確立 →read/write をいちいちやってると複数リクエストあったときに処理が滞る。そのときにプロセスやスレッドの概念が必要。

プロセスもスレッドも並列化の概念ですが、階層が違うようです。プロセス同士はメモリも完全に独立ですので、干渉できません。スレッドはプロセスに包含される機能で、スレッド間はメモリを共有可能です。

CPU レベルでいうと、スレッドは完全に並列に処理されるわけではなく、高速にスレッドを切り替えているようです。  
ただそれが原因でマルチスレッドはバグが発生することもあるようなので、注意が必要ですね。

上記のように複数のリクエストに答えるために複数のプロセスやスレッドを使って対応することありますが、10000 コネクション発生すると OS がダウンしてしまうという C10K 問題というのが以前提唱されたようです。

そこで、非同期 i/o というのが出てきたみたいです。

##### 非同期プログラミング（Web）

単一の処理が終わるまで次の処理が実行されないのは、ユーザ体験としては、プログラム全体が止まっているのと同じ。  
ブラウザがプロセッサーの制御を返して、ユーザに操作可能にするまで固まる状態をブロッキングといい、JavaScript はシングルスレッドなので発生する。

##### Node.js の非同期 i/o

Node.js はシングルスレッドでかつ非同期 i/o という特徴があります。  
Node.js では処理をブロッキングせず、後続の処理を実行できます。そして、待機中の処理は Reactor Pattern と呼ばれる方法で監視されます。

Reactor Pettern は下記の流れみたいです。詳細は[ここ](https://engineer.recruit-lifestyle.co.jp/techblog/2019-12-13-node-async-io/)の記事様で。

1. I/O が要求される、そのときに完了時の処理も受け取る
1. I/O が完了していなくても、アプリケーション側に処理を戻す
1. I/O が完了すると、完了時にすべき処理を queue に入れる
1. event loop がその queue から処理を取り出し実行する

I/O の監視は、実質的には OS が用意しているイベント通知（Mac なら kqueue）などを利用しているみたいです。マルチプラットフォームな非同期 i/o ライブラリとして libuv というのが Reactor Pattern の実装には使われているみたいです。

イベントループでは、「こういう i/o 要求があったらこうして」という watcher を登録できるようです。

確かに上記にようにすれば、無限ループで監視しなくてもうまくいきそうですね。

こんなのどうやって調べたんだろ。。。

##### クッキーとセッション

なんとなくわかってるようで説明できないことば。  
クッキーはブラウザに格納され、サーバの名前、有効期限、キーバリューなどを保持しているものです。  
サイトを離れると削除されるセッションクッキーと、ブラウザを消しても消えない永続クッキーの二種類があります。

セッションはサーバ上の一時ディレクトリに保存されたデータのことです。実際には、クッキーはそこまで大量の情報を保持するわけではないので、クッキーは「誰が」の情報を、セッションは「何をしたか」という情報を持っているようです。

ちなみに、キャッシュはデータへのアクセスを早くするために頻繁にアクセスされるコンテンツを保存する機能で、クッキーと似ているようですが、ユーザ情報の保存ではない点で異なるようです。

#### HTTP/DNS

dig コマンドで IP アドレスを調べたりできるらしい

##### DNS レコード

あまり馴染みのないことばだったので。  
DNS 側で持ってる IP アドレスの対応表のようなものの中の設定値のようなものらしい。  
例えば、CNAM は正規ホスト名に対する別名を定義するレコードで、下記の様な働きがある。

ドメイン名：abc.com の場合  
ホスト名：www  
VALUE：www.onamae.com　と入力  
⇒`http://www.abc.com/にアクセスするとhttp://www.onamae.com/に転送されます`

#### ソフトウェアライセンス

ライセンスによっては元の改変すると元のライセンスを引き継いだりするのらしい。なるほど

#### ソフトウェアテスト

##### テストとは？

要件を満たすか（検証）と正しいものか（妥当性確認）を行う  
計画、モニタリングとコントロール、分析、設計、実装、実行、完了のサイクル  
目的やアプローチにあわせて具体化していく

##### テスト設計技法

- 振る舞いベースの技法（ブラックボックステスト）
  - 同値分割、境界値分析、デシジョンテーブル
- 内部構造ベースの技法（ホワイトボックステスト）
  - ステートメント、デシジョンテスト
- 経験ベースの技法
  - エラー推測、探索的テスト、チェックリストベーステスト

テストはほとんど書いたことないから勉強しないとね。  
本は手元にあるから。。。

#### 参考

- [2021 年のエンジニア新人研修の講義資料を公開しました](https://blog.cybozu.io/entry/2021/07/20/100000).
- [プロセスとスレッドの違いとは？超わかりやすく解説！【図解とプログラム付き】](https://webpia.jp/thread_process/).
- [Web Socket](https://developer.mozilla.org/ja/docs/Web/AP.I/WebSockets_API)
- [非同期 IO について](https://qiita.com/legokichi/items/1f3b1bd51e206ffdd2a6)
- [Node.js の非同期 I/O について調べてみた](https://engineer.recruit-lifestyle.co.jp/techblog/2019-12-13-node-async-io/)
- [非同期プログラミングの一般的概念](https://developer.mozilla.org/ja/docs/Learn/JavaScript/Asynchronous/Concepts)
- [クッキー（Cookie）とセッションとキャッシュの違いは何か？](https://ssaits.jp/promapedia/technology/cookie-session-cache.html)
